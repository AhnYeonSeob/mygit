<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
<style>
	.btn-area {
    text-align: right; /* 오른쪽 정렬 */
    margin-top: 20px; /* 버튼 위에 여백 추가 */
    margin-bottom: 10px; /* 테이블과의 하단 여백 */
    padding-right: 15px; /* 오른쪽에 약간의 여백 추가 */
	}
	
</style>
<h2>취업정보게시판 상세보기</h2>
<table class="table table-bordered" id="form-table" data-path="${pageContext.request.contextPath }" >
    <!-- 제목 / 공고 시작일 / 공고 마감일 (가로로 한 줄에 배치) -->
    <tr>
        <th>제목</th>
        <td colspan="3">${jobboard.jobNm}</td>
    </tr>
    <tr>
        <th>공고 시작일</th>
        <td>${jobboard.jobDt}</td>
        <th>공고 마감일</th>
        <td>${jobboard.jobEt}</td>
    </tr>
    
    <!-- 카테고리 / 작성일 -->
    <tr>
        <th>카테고리</th>
        <td>${jobboard.jobCate}</td>
        <th>작성일</th>
        <td>${jobboard.jobDate}</td>
    </tr>
    
    
    <!-- 첨부파일 -->
    <tr>
        <th>첨부파일</th>
        <td colspan="3">
            <c:forEach items="${jobboard.atchFile.fileDetails }" var="fd" varStatus="vs">
                <c:url value='/atch/${fd.atchFileId }/${fd.fileSn }' var="downUrl"/>
                <a href="${downUrl }">${fd.orignlFileNm }(${fd.fileFancysize })</a>
                ${not vs.last ? '|' : ''}
            </c:forEach>
            <c:if test="${empty jobboard.atchFile.fileDetails}">
                첨부파일 없음
            </c:if>
        </td>
    </tr>
    <!-- 내용 -->
  <tr>
    <th>내용</th>
    <td colspan="3">
        <!-- 게시글 내용 -->
        <div>${jobboard.jobContent}</div>

        <!-- 첨부된 이미지 파일을 내용에 추가 -->
        <c:forEach items="${jobboard.atchFile.fileDetails}" var="fd">
            <!-- 이미지 파일 확장자 검사 -->
            <c:if test="${fn:toLowerCase(fd.fileExtsn) == 'jpg' || 
                         fn:toLowerCase(fd.fileExtsn) == 'jpeg' || 
                         fn:toLowerCase(fd.fileExtsn) == 'png' || 
                         fn:toLowerCase(fd.fileExtsn) == 'gif'}">
                <div style="margin-top: 10px;">
                    <img src="<c:url value='/jobboard/${jobboard.jobNo}/atch/${fd.atchFileId}/${fd.fileSn}' />" 
                         alt="${fd.orignlFileNm}" 
                         style="max-width: 100%; height: auto;" />
                </div>
            </c:if>
        </c:forEach>
    </td>
</tr>

    
</table>

<!-- 버튼 영역 -->
<div class="btn-area">
    <a href="<c:url value='/jobboard/${jobboard.jobNo}/edit' />" class="btn btn-primary">수정</a>
    <form action="<c:url value='/jobboard/${jobboard.jobNo}/delete' />" method="post" style="display:inline;">
        <button type="submit" class="btn btn-danger">삭제</button>
    </form>
    <a href="<c:url value='/jobboard' />" class="btn btn-primary">목록</a>
</div>
