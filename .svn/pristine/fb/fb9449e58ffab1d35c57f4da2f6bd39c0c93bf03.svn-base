  /**
 * 
 */// 전송을 누르면 데이터를 전송하고 컨트롤러는 값을 등록하고 시험 페이지는 닫혀야함. 씨ㅏ
document.addEventListener("DOMContentLoaded", () => {
	const form = document.querySelector("#newQuestion");

	// 제출 이벤트 처리
	form.addEventListener("submit", (e) => {
		e.preventDefault(); // 기본 제출 동작 방지

		// FormData 객체로 데이터 수집
		const formData = new FormData(form);

		// JSON 데이터 배열 생성
		const jsonData = [];
		formData.forEach((value, key) => {
			jsonData.push({
				queNo: key,
				queAnswer: value
			});
		});

		console.log("JSON Data:", jsonData);

		// JSON 데이터 전송
		fetch(form.action, {
			method: "POST",
			headers: {
				"Content-Type": "application/json",
			},
			body: JSON.stringify(jsonData),
		})
			.then((response) => response.json())
			.then((data) => {
				console.log("Response:", data);
				if (data.result == "ok") {
					window.close();
				} else {
					swal("실패", "제출이 실패했습니다.", "error");
				}
			})
			.catch((error) => {
				console.error("Error:", error);
				swal("오류", "서버와의 통신 중 문제가 발생했습니다.", "error");
			});
	});
});

function showTestConfirm() {
	const form = document.querySelector("#newQuestion");

	// SweetAlert confirm 창 띄우기
	swal({
		title: "제출하시겠습니까?", // 제목
		text: "제출 시 수정 및 재시험이 불가능합니다.", // 본문
		icon: "warning", // 알림 타입 (경고)
		buttons: ["취소", "제출"], // 버튼 텍스트
		dangerMode: true, // 강조 모드
	}).then((isConfirm) => {
		if (isConfirm) {
			// 확인 버튼 클릭 시 폼 제출
			form.dispatchEvent(new Event("submit"));
		} else {
			// 취소 버튼 클릭 시
			swal("취소되었습니다!", "제출이 취소되었습니다.", "error");
		}
	});
}




