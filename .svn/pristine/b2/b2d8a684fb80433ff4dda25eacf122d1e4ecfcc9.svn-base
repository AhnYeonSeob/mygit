<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<style>
table {
	width: 100%;
	border: 1px solid #ddd;
	border-collapse: collapse;
	font-family: Arial, sans-serif;
}

tr {
	border-bottom: 1px solid #ddd;
}

td {
	padding: 10px;
	color: #333;
}

.badge {
	background-color: #e0ebff;
	padding: 3px 6px;
	border-radius: 4px;
	font-size: 12px;
}

.title {
	font-size: 18px;
	width: 10px;
	
}

.info {
	color: #777;
	font-size: 18px;
}

.content {
	padding: 15px;
	font-size: 18px;
	color: #333;
	height: 200px;
	width: 200px; 
}

.right-align {
	text-align: right;
	padding-right: 10px;
}

#cjName {
	width: 300px;
	height: 100px;
}
</style>
<p>${board }</p>
<input type="hidden" value="${board.sibNo }" id="sibNo" />
<h4>문의 게시글</h4>
<table class="table table-bordered">
	<script>
    const contextPath = "${pageContext.request.contextPath}";
</script>

	<!-- 상단 회원 정보 -->
	<tr>
		<td colspan="2"  style="width: 50px;"><span class="title">상태</span></td>
		<td colspan="2"><span class="title">${board.sibSttsYn} </span></td>
	</tr>
	<tr>
		<td colspan="2"><span class="title">제목
		</span>
		</td>
		<td colspan="2"><span class="title">${board.sibTtl}
		</span>
		</td>

	</tr>
	<!-- 작성자, 날짜, 이메일 -->
	
	
	
	<tr>

		<td colspan="1" ><span class="title">작성일시</span></td>
		
		<td colspan="1"><span class="title">${fn:split(board.sibDt, 'T')[0] } ${fn:split(board.sibDt, 'T')[1] }
		</span></td>
		<td colspan="1" ><span class="title">작성자</span></td>
		
		<td colspan="1"><span class="title">${board.userId}
		</span></td>
	</tr>
	<!-- 본문 내용 -->
	<tr>
		<td colspan="4" class="content">${board.sibCn}</td>

	</tr>


	<br>
	
	<tr>

		<br><br> 

<td colspan="4" align="center">
			<!-- 관리자가 입력할 수 있는 textarea --> 
			<c:if
				test="${not empty board.sibAns}">
				<label for="adminReply"  style="display: inline-block; vertical-align: top; padding-top: 5px;">관리자: </label>
				<textarea id="adminReply" name="adminReply" disabled
					style="width: 1200px; height: 100px; padding: 0px 80px 0px 0px; line-height: 1.2; text-align: left; resize: none; box-sizing: border-box; overflow-y: auto;">${board.sibAns}</textarea>
			</c:if> 
			<c:if test="${empty board.sibAns}">
			<label for="adminReply">관리자: </label> &nbsp; &nbsp;
				<textarea id="adminReply" placeholder="답변을 입력하세요" style="width: 1200px; height: 100px; padding: 0px 20px 0px 0px; line-height: 1.2; text-align: left; resize: none; box-sizing: border-box; overflow-y: auto;"></textarea>
				<button id="submitButton" onclick="submitReply()"
					style="margin-top: 10px; padding: 5px 10px; background-color: #007bff; color: white; border: none; cursor: pointer;">답변
					등록</button>
			</c:if>
		
			</td>
	</tr>



	<tr>
		<td colspan="4" align="right"><a href="<c:url value='/answer'/>"
			class="btn btn-primary">목록</a> <!-- 삭제 버튼 -->

			<button type="button" onclick="deletePost('${board.sibNo}')"
				class="btn btn-danger">삭제</button> <script>
    function deletePost(sibNo) {
    	const contextPath = "${pageContext.request.contextPath}";
    	
    	if (confirm("정말 삭제하시겠습니까?")) {
        	 fetch(`${contextPath}/answer/deleteBo/${sibNo}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                  
                
                }
            })
            .then(response => {
                if (response.ok) {
                    alert("게시글이 삭제되었습니다.");
                    window.location.href = `${contextPath}/answer`;
                } else {
                    return response.text().then(error => {
                        alert("삭제 실패: " + error);
                    });
                }
            })
            .catch(error => {
                alert("오류가 발생했습니다. 다시 시도해주세요.");
                console.error("Error:", error);
            });
        }
    }
</script> <a href="<c:url value='/answer/${sibNo}/edit' />" class="btn btn-info">수정</a>
		</td>



	</tr>

</table>
<script
	src="${pageContext.request.contextPath }/resources/js/board/reply.js"></script>




