<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
 <!-- sweetalert-->
    <link href="https://cdn.jsdelivr.net/npm/sweetalert/dist/sweetalert.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert/dist/sweetalert.min.js"></script>

<h4>사용자 입력 폼</h4>
<br>
<style>
    select {
        width: 100%;  /* 모든 select 요소의 너비를 100%로 설정 */
    }
</style>
<form:form modelAttribute="person" id="personForm" action="../../../yguniv/person/create">
    <table class="table">
        <!-- 공통 정보 입력 필드 -->
        <tr>
            <th>ID</th>
            <td><input type="text" name="id" class="form-control" required value="${person.id}" /><span class="text-danger">${errors.id}</span></td>
        </tr>
        <tr>
            <th>PSWD</th>
            <td><input type="text" name="pswd" class="form-control" required value="${person.pswd}" /><span class="text-danger">${errors.pswd}</span></td>
        </tr>
        <tr>
            <th>이름</th>
            <td><input type="text" name="nm" class="form-control" required value="${person.nm}" /><span class="text-danger">${errors.nm}</span></td>
        </tr>
        <tr>
            <th>생년월일</th>
            <td><input type="date" name="brdt" class="form-control" required value="${person.brdt}" /><span class="text-danger">${errors.brdt}</span></td>
        </tr>
       <tr>
    <th>성별</th>
    <td>
        <label>
            <input type="radio" name="sexdstnCd" value="M" 
                <c:if test="${person.sexdstnCd == 'M'}">checked</c:if> /> 남성
        </label>
        <label>
            <input type="radio" name="sexdstnCd" value="F" 
                <c:if test="${person.sexdstnCd == 'F'}">checked</c:if> /> 여성
        </label>
        <span class="text-danger">${errors.sexdstnCd}</span>
    </td>
</tr>


    </table>

    <!-- 사용자 유형 선택 -->
    <select class="form-select" id="user-type" onchange="usertype(event)">
        <option value="">select user type</option>
        <option value="professor">교수</option>
        <option value="student">학생</option>
        <option value="employee">교직원</option>
    </select>


    <!-- 교수 정보 입력 필드 -->
    <div id="professor-table" style="display:none;">
        <table class="table">
         <tr>
                <td>
                    <!-- ID는 이미 person.id로 설정되어 있으므로, 교수 정보에도 해당 값을 넣어주기 -->
                    <input class="form-control" type="hidden" name="professorVO.profeId" value="${person.id}" />
                </td>
            </tr>
            <tr>
                <th> 학과
                    <select class="form-select" id="department-type" name="professorVO.deptNo" >
                        <option value="">학과를 선택하세요</option>
                        <option value="c001">컴퓨터공학과</option>
                        <option value="c002">기계공학과</option>
                        <option value="c003">전자공학과</option>
                    </select>
                </th>
            </tr>
            <tr>
                <th> 구분코드
                    <select class="form-select" id="professor-type" name="professorVO.profeType">
                        <option value="">구분을 선택하세요</option>
                        <option value="정교수">정교수</option>
                        <option value="부교수">부교수</option>
                        <option value="기간제">기간제</option>
                    </select>
                </th>
            </tr>
        </table>
    </div>

 <!-- 교직원 입력 폼 -->
    <div id="employee-table" style="display:none;">
        <table class="e-table">
		  <tr>
                <td>
                    <!-- ID는 이미 person.id로 설정되어 있으므로, 교수 정보에도 해당 값을 넣어주기 -->
                    <input class="form-select" aria-label="Default select example" type="hidden" name="employeeVO.empId" value="${person.id}" />
                   
                </td>
            </tr>
            <tr>
                <th> 부서
	                <select class="form-select"  id="emp-dept" name="employeeVO.empDept">
	                	<option value="">부서를 선택하세요</option>
	                	<option value="인사팀">인사팀</option>
	                	<option value="총무팀">총무팀</option>
	                	<option value="교무팀">교무팀</option>
	                </select>
                </th>
            </tr>
            
              <tr>
                <th> 직급
	                <select class="form-select"  id="emp-jbgd" name="employeeVO.empJbgd"> 
	                	<option value="">직급을 선택하세요</option>
	                	<option value="정교수">행정직</option>
	                	<option value="부교수">주임</option>
	                	<option value="기간제">조교</option>
	                </select>
                </th>
            </tr>
        </table>
    </div>
    
	<!-- 학생 입력 폼 -->
    <div id="student-table" style="display:none;">
        <table class="e-table">
		  <tr>
                <td>
                    <!-- ID는 이미 person.id로 설정되어 있으므로, 교수 정보에도 해당 값을 넣어주기 -->
                    <input class="form-select" aria-label="Default select example" type="hidden" name="studentVO.stuId" value="${person.id}" />
                   
                </td>
            </tr>
            <tr>
                <th> 학년
	                <select class="form-select"  id="grade-cd" name="studentVO.gradeCd">
	                	<option value="">학년을 선택하세요</option>
	                	<option value="l001">1학년</option>
	                	<option value="l002">2학년</option>
	                </select>
                </th>
            </tr>
            
              <tr>
                <th>학적코드
	                <select class="form-select"  id="stre-cate-cd" name="studentVO.streCateCd"> 
	                	<option value="">직급을 선택하세요</option>
	                	<option value="정교수">행정직</option>
	                	<option value="부교수">주임</option>
	                	<option value="기간제">조교</option>
	                </select>
                </th>
            </tr>
        </table>
    </div>
	<br>

   <div style="text-align: right;">
    <button class="btn btn-primary" type="submit">저장</button>
</div>

</form:form>




<script>
function usertype(e) {
    const selectedUserType = e.target.value;  

    //교수 교직원꺼 일단 숨겨
    document.getElementById("professor-table").style.display = "none";
    document.getElementById("employee-table").style.display = "none";

    
    if (selectedUserType === "professor") {
        document.getElementById("professor-table").style.display = "block";
    } else if (selectedUserType === "employee") {
        document.getElementById("employee-table").style.display = "block";
    }
}
</script>
<script src="${pageContext.request.contextPath}/resources/js/person/personForm.js"></script>
