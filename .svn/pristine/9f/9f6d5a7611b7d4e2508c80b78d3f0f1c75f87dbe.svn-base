<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>


<style>
  /* 작은 텍스트 설정 */
  .small-text {
    font-size: 0.8rem; /* 더 작은 크기 */
    color: #6c757d; /* 약간 회색으로 색상도 조정 */
  }

  /* 큰 텍스트 설정 (사유는 크게 표시) */
  .large-text {
    font-size: 1rem; /* 기본 텍스트보다 조금 큰 크기 */
    display: block; /* 사유가 여러 줄로 보이도록 */
    white-space: pre-wrap; /* 내용이 길어질 경우 줄 바꿈을 허용 */
    word-wrap: break-word; /* 긴 단어를 잘라서 줄 바꿈 */
    color: #000; /* 글씨 색상은 검정색 */
  }

  /* 테이블 스타일 */
  .table {
    width: 100%;
    margin-bottom: 1rem;
    color: #212529;
  }

  .table td {
    padding: 0.3rem; /* 각 셀의 padding을 더 작게 설정 */
  }
</style>


<select class="form-select form-select-sm ms-auto" style="width: 150px;" id="statusFilter" aria-label="Default select example">
  <option selected disabled>선택해주세요.</option>
  <option value="대기">대기</option>
  <option value="승인">승인</option>
  <option value="반려">반려</option>
</select>

<div>
  <table class="table table-primary align-middle table-bordered" id="absenceTable">
    <thead>
      <tr>
        <th>강의주차</th>
        <th>일자</th>
        <th>교시</th>
        <th>학번</th>
        <th>이름</th>
        <th>출결상태</th>
        <th>공결사유</th>
        <th>서류접수상태</th>
        <th>처리방법</th>
      </tr>
    </thead>
    <tbody>
    <c:forEach items="${selectAbsenceCertificateReceiptList}" var="absence">
      <tr class="absenceRow" data-absence-status="${absence.PRST}">
        <td>${absence.lectOrder}</td>
        <td>${absence.orderVO.sectDt}</td>
        <td>${absence.TEIN}</td>
        <td>${absence.stuId}</td>
        <td>${absence.studentVO.nm}</td>
        <td>${absence.ATST}</td>
        <td>${absence.absenceResn}</td>
        <td>${absence.PRST}</td>
        <td>
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop"
                  data-lectOrder="${absence.lectOrder}" 
                  data-studentName="${absence.studentVO.nm}" 
                  data-studentId="${absence.stuId}"
                  data-absenceReason="${absence.absenceResn}" 
                  data-absenceStatus="${absence.PRST}">처리
          </button>
        </td>
<%--         <td>${absence.lectNo}</td> --%>
<%--         <td>${absence.weekCd }</td> --%>
<%--         <td>${absence.cocoCd }</td> --%>
<%--         <td>${absence.attendanceVO.atndCd}</td> --%>
      </tr>
    </c:forEach>
  </tbody>
  </table>
</div>



<!-- 원본 모달 (승인 처리) -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog" style="max-width: 80%; width: 80%;">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">승인 처리</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <table class="table">
          <tbody>
            <tr>
              <td><strong>강의 차수:</strong></td>
              <td id="lectOrder" class="small-text"></td>
              <td><strong>학생명:</strong></td>
              <td id="studentName" class="small-text"></td>
            </tr>
            <tr>
              <td><strong>학번:</strong></td>
              <td id="studentId" class="small-text"></td>
              <td><strong>상태:</strong></td>
              <td id="absenceStatus" class="small-text"></td>
            </tr>
          </tbody>
        </table>
        <img src="https://plus.unsplash.com/premium_photo-1675553988173-a5249b5815fe?q=80&w=1064&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="임시 이미지" class="img-fluid mb-3" style="max-width: 200px; height: auto;">
        <p><strong>사유:</strong> <span id="absenceReason" class="large-text"></span></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="rejectButton">반려</button>
        <button type="button" class="btn btn-primary" id="approveButton">승인</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
      </div>
    </div>
  </div>
</div>








<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script> -->
<script src="${pageContext.request.contextPath }/resources/js/absenceCertificateReceipt/absencecertificatereceipt.js"></script>
