<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@ taglib uri="http://www.springframework.org/security/tags" prefix="security"%>

<security:authentication property="principal.username" var="id"/>
<input type="hidden" value="${my.id }" id="id" />
<script>
    const contextPath = "${pageContext.request.contextPath}/";
</script>

<style>

.profile .profile-card img {
  max-width: 120px;
}

.profile .profile-card h2 {
  font-size: 24px;
  font-weight: 700;
  color: #2c384e;
  margin: 10px 0 0 0;
}

.profile .profile-card h3 {
  font-size: 18px;
}

.profile .profile-card .social-links a {
  font-size: 20px;
  display: inline-block;
  color: rgba(1, 41, 112, 0.5);
  line-height: 0;
  margin-right: 10px;
  transition: 0.3s;
}

.profile .profile-card .social-links a:hover {
  color: #012970;
}

.profile .profile-overview .row {
  margin-bottom: 20px;
  font-size: 15px;
}

.profile .profile-overview .card-title {
  color: #012970;
}

.profile .profile-overview .label {
  font-weight: 600;
  color: rgba(1, 41, 112, 0.6);
}

.profile .profile-edit label {
  font-weight: 600;
  color: rgba(1, 41, 112, 0.6);
}

.profile .profile-edit img {
  max-width: 120px;
}

</style>

<div class="container">
  <!-- 프로필 카드 -->
  <div class="row">
    <div class="col-12 mb-4">
      <div class="card">
        <div class="card-body profile-card pt-4 d-flex flex-column align-items-center">
          <c:choose>
            <c:when test="${not empty my.proflPhoto}">
              <img 
                src="data:image/jpeg;base64,${fn:escapeXml(my.proflPhoto)}" 
                alt="Profile Photo" 
                class="rounded-circle" 
                style="width: 150px; height: 150px; object-fit: cover;" />
            </c:when>
            <c:otherwise>
              <img 
                src="${pageContext.request.contextPath}/resources/NiceAdmin/assets/img/default-profile.jpg" 
                alt="Default Profile Photo" 
                class="rounded-circle" 
                style="width: 150px; height: 150px; object-fit: cover;" />
            </c:otherwise>
          </c:choose>

          <br>
          <h2>${my.nm}</h2>
          <h4>${my.id}</h4>
        </div>
      </div>
    </div>
  </div>

  <!-- 정보 탭 -->
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-body pt-3">
          <!-- Bordered Tabs -->
          <ul class="nav nav-tabs nav-tabs-bordered">
            <li class="nav-item">
              <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#profile-overview">기본 정보</button>
            </li>
        
          </ul>

          <!-- 탭 콘텐츠 -->
          <div class="tab-content pt-2">
            <!-- 기본 정보 -->
            <div class="tab-pane fade show active" id="profile-overview">
              <h5 class="card-title">Profile Details</h5>
              <div class="row">
                <div class="col-lg-3 col-md-4 label">name</div>
                <div class="col-lg-9 col-md-8">${my.nm}</div>
              </div>
              <br>
              <div class="row">
                <div class="col-lg-3 col-md-4 label">학번</div>
                <div class="col-lg-9 col-md-8">${my.id}</div>
              </div>
              <br>
              <div class="row">
                <div class="col-lg-3 col-md-4 label">생년월일</div>
                <div class="col-lg-9 col-md-8">${my.brdt}</div>
              </div>
              <br>
              <div class="row">
                <div class="col-lg-3 col-md-4 label">주소</div>
                <div class="col-lg-9 col-md-8">${my.zip}</div>
              </div>
              <br>
              <div class="row">
                <div class="col-lg-3 col-md-4 label">전화번호</div>
                <div class="col-lg-9 col-md-8">${my.mbtlnum}</div>
              </div>
              <br>
              <div class="row">
                <div class="col-lg-3 col-md-4 label">이메일</div>
                <div class="col-lg-9 col-md-8">${my.eml}</div>
              </div>
              <br>
              <div class="row">
			   <div class="col-lg-3 col-md-4 label">수신 여부</div>
			    <div class="col-lg-9 col-md-8">
			        <!-- 이메일 수신 여부 -->
			        <label>
			            <input type="checkbox" disabled ${my.emlRcptnAgreYn == 'Y' ? 'checked' : ''} />
			            이메일 수신
			        </label>
			        <!-- SMS 수신 여부 -->
			        <label>
			            <input type="checkbox" disabled ${my.smsRcptnAgreYn == 'Y' ? 'checked' : ''} />
			            SMS 수신
			        </label>
			    </div>
			</div>
			<div>
			<a href="${pageContext.request.contextPath}/mypage/${my.id}/auth" class="btn btn-primary">수정</a>
			
			</div>
           </div>

			
          </div>
          
          <!-- End 탭 콘텐츠 -->
        </div>
      </div>
    </div>
  </div>
</div>

