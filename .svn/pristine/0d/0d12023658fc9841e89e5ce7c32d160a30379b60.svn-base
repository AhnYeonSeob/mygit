<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<style>
.objection-form {
	width: 600px;
	margin: 20px auto;
}

.info-grid table {
	width: 100%;
	border-collapse: collapse;
}

.info-grid td {
	padding: 8px;
	text-align: center;
}

.content-area {
	display: flex;
	margin-top: 20px;
	border: 1px solid #000;
}

.left-label {
	width: 100px;
	padding: 10px;
	background-color: #f0f0f0;
}

.right-content {
	flex: 1;
	padding: 10px;
}

textarea {
	width: 100%;
	height: 200px;
	resize: none;
}

.button-area {
	text-align: center;
	margin-top: 20px;
}

.submit-btn {
	padding: 10px 30px;
	background-color: #4267B2;
	color: white;
	border: none;
	cursor: pointer;
}

.dissent-td {
	border: 2px inset black;
}

.dissent-th {
	background-color: #f0f0f0;
	border: 2px inset black;
}

#dissentTable {
	background-color: white;
	border: 2px inset black;
}
</style>
<h1>이의 등록</h1>
<h1>학생이 이의신청을 등록하는 곳</h1>

<c:if test="${not empty attenLectList }">
					
					
<form:form method="post" modelAttribute="newDissent" id="disForm">
	<div class="objection-form">
		<h2>이의 신청</h2>

		<div class="info-grid">
			<table id="dissentTable">
				<tr>
					<th class="dissent-th">과목명</th>
					<td class="dissent-td">
							<form:select path="lectNo">
								<form:option value="" label="선택" />
								<form:options items="${attenLectList}" itemValue="lectVO.lectNo"
											  itemLabel="lectVO.lectNm" />
							</form:select>
						</td>
						
					<th class="dissent-th">학번</th>
				
					<td class="dissent-td">
						<form:input path="stuId" value="2024100001"/>
					</td>
				
					
<!-- 					<td class="dissent-td"> -->
<!-- 					로그인 대상의 학번 가져오기 -->
<!-- 					2024100001</td> -->
					<!-- form:input들 넣기 -->
				</tr>
				<tr>
					<th class="dissent-th">교수명</th>
					<td id="profeNm" class="dissent-td">
						<select name="lectNm" id="lectNm">
							<option value>선택</option>
						</select>
					</td>
					<th class="dissent-th">이름</th>

					<td class="dissent-td">	로그인 대상의 아이디이름 가져오기
					</td>
				</tr>
				<c:forEach items="${attenLectList}" var="atten">
    <c:if test="${atten.lectNo eq selectedLectNo}">
        <td class="dissent-td">${atten.lectVO.lectScore}</td>  <!-- 학점 -->
        <td class="dissent-td">
            <c:set var="totalScore" value="${atten.attenVO.attenAtndScore + atten.attenVO.assigScore + atten.attenVO.testScore}" />
            ${totalScore}
        </td>
    </c:if>
    
</c:forEach>
				
				<tr>
					<th class="dissent-th">학점</th>
					<td id="lectScore" class="dissent-td"></td>
					<th class="dissent-th">출석</th>
					<td id="attenScore" class="dissent-td"></td>
					<th class="dissent-th">과제</th>
					<td id="assigScore" class="dissent-td"></td>
					<th class="dissent-th">시험</th>
					<td id="testScore" class="dissent-td"></td>
					<th class="dissent-th">성적</th>
					<td class="dissent-td">B+</td>
				</tr>
			</table>
		</div>

		<div class="content-area">
			<div class="left-label">신청 사유</div>
			<div class="right-content">
				<form:textarea type="text" path="objcCn" class="form-control"
							value="${score_formal_objection.objcCn }" placeholder="이의 평가는 교수님이 직접 확인합니다." />							
							<span class="text-danger">${errors.objcCn }</span>
			</div>
		</div>

		<div class="button-area">
			<button type="submit" class="submit-btn">등록</button>
		</div>
	</div>

	<!-- 입력받은 값은 한 학생이 한 학기에 한 강의에서 받은 성적들이 보여야함 -->
</form:form>
</c:if>


<script  src="${pageContext.request.contextPath }/resources/js/dissent/attendeeDissentScript.js"></script>

