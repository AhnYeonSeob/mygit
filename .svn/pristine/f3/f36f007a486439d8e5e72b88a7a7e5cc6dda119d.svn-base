document.getElementById('confirmApplication').addEventListener('click', function () {
    swal({
        title: "신청하시겠습니까?",
        text: "신청 후에는 취소할 수 없습니다.",
        icon: "info",
        buttons: ["취소", "네, 신청합니다!"],
        dangerMode: true,
    }).then((willSubmit) => {
        if (willSubmit) {
            // 서버에 신청 요청 보내기
            fetch(`${contextPath}/studentCard/apply`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    studentId: studentData.id,
                    name: studentData.name,
                    phone: studentData.phone,
                    email: studentData.email
                })
            })
            .then(response => response.json()) // JSON 응답 처리
            .then(data => {
                if (data) {
                    // 요청 성공 시
                    swal({
                        title: "신청 완료",
                        text: "학생증 신청이 완료되었습니다.",
                        icon: "success",
                        button: "확인"
                    }).then(() => {
                        // 추가 동작이 필요한 경우 여기에 작성
                        location.reload(); // 예: 페이지 새로고침
                    });
                } else {
                    // 요청 실패 시
                    swal({
                        title: "신청 실패",
                        text: "신청 처리 중 문제가 발생했습니다. 다시 시도해주세요.",
                        icon: "error",
                        button: "확인"
                    });
                }
            })
            .catch(error => {
                // 네트워크 오류 또는 서버 오류 처리
                swal({
                    title: "서버 오류",
                    text: "서버와의 통신 중 오류가 발생했습니다.",
                    icon: "error",
                    button: "확인"
                });
            });
        }
    });
});
