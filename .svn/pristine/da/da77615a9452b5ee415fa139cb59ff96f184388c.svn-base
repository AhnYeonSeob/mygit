

function showApprovalButtons() {
	document.getElementById('approval-buttons').style.display = 'block';
	document.getElementById('waiting-button').style.display = 'none';
}
function change(testNo, status) {
    let check;
    let newButton;
    let newHiddenButtons;

    switch(status) {
        case 'ok':
            check = '시험 승인됨';
            newButton = '<button class="btn btn-primary" id="waiting-button" onclick="showApprovalButtons()">승인</button>';
            newHiddenButtons = `
                <div id="approval-buttons" style="display: none;">
                    <button class="btn btn-primary" onclick="change('${testNo}','wa')">대기</button>
                    <button class="btn btn-warning" onclick="change('${testNo}','no')">반려</button>
                </div>`;
            break;
        case 'no':
            check = '시험 반려됨';
            newButton = '<button class="btn btn-primary" id="waiting-button" onclick="showApprovalButtons()">반려</button>';
            newHiddenButtons = `
                <div id="approval-buttons" style="display: none;">
                    <button class="btn btn-primary" onclick="change('${testNo}','ok')">승인</button>
                    <button class="btn btn-warning" onclick="change('${testNo}','wa')">대기</button>
                </div>`;
            break;
        case 'wa':
            check = '시험 대기중';
            newButton = '<button class="btn btn-primary" id="waiting-button" onclick="showApprovalButtons()">대기</button>';
            newHiddenButtons = `
                <div id="approval-buttons" style="display: none;">
                    <button class="btn btn-primary" onclick="change('${testNo}','ok')">승인</button>
                    <button class="btn btn-warning" onclick="change('${testNo}','no')">반려</button>
                </div>`;
            break;
    }

    let testStatusElement = document.getElementById('test-status');
    testStatusElement.innerHTML = newButton + newHiddenButtons;

    console.log(testNo, status);
    testCheck(testNo, status);
}

function showApprovalButtons() {
    let approvalButtons = document.getElementById('approval-buttons');
    approvalButtons.style.display = approvalButtons.style.display === 'none' ? 'block' : 'none';
}


async function testCheck(testNo, ch) {
	const url = "/yguniv/test/profe";
	const pUrl = `${url}/${testNo}/${ch}`
	console.log(pUrl);
	const resp = await fetch(pUrl)

	if (resp.ok) {
		swal({
			title: "성공",
			text: "변경되었습니다.",
			icon: "success",
			button: "확인"
		});

		//등록이 성공하면 리스트 최신화 하기 + 라디오 버튼 검색조건 추가하기
	} else {
		swal({
			title: "추가실패",
			text: "입력실패",
			icon: "error",
			button: "확인"
		});
	}
}





