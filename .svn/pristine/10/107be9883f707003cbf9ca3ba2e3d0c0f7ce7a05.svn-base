/**
 * 
 */
document.addEventListener("DOMContentLoaded", ()=>{
	// 주차 수정 버튼 클릭
	$(document).on('click', '.week-update-btn', function(){
		let $tr = $(this).parents('tr');
		$tr.find('button').toggle();
		let $td = $tr.find('.fw-bold');
		$td.html(`<input class="form-control" type="text" value="${$td.text()}" data-origin="${$td.text()}"/>`);	
	});
	
	// 주차 수정 저장 버튼 클릭
	$(document).on('click', '.week-update-save-btn', function(){
		let $tr = $(this).parents('tr');
		let $td = $tr.find('.fw-bold');
		let $input = $td.find('input');
		axios.put(`${cp.value}/lecture/${lectNo.value}/materials/${$tr.data("weekCd")}`
			, {leweNm: $input.val()})
		.then(resp=>{
			if(resp.status == 200){
				swal({
					title: "수정완료",
					text: "주차명이 성공적으로 수정되었습니다",
					icon: "success",
					button: "확인",
				});
				$td.text($input.val());
			}else{
				swal({
					title: "수정실패",
					text: "주차명 수정에 실패하였습니다\r\n잠시 후 다시 시도해 주세요",
					icon: "error",
					button: "확인",
				});
				$td.text($input.data("origin"));
			}
		}).catch(()=>{
			swal({
				title: "수정실패",
				text: "주차명은 공백일 수 없습니다",
				icon: "error",
				button: "확인",
			});
			$td.text($input.data("origin"));
		});
		$tr.find('button').toggle();
	});
	
	// 주차 수정 취소 버튼 클릭
	$(document).on('click', '.week-update-cancel-btn', function(){
		let $tr = $(this).parents('tr');
		$tr.find('button').toggle();
		let $td = $tr.find('.fw-bold');
		let $input = $td.find('input');
		$td.text($input.data("origin"));
	});
	
	// 주차 삭제 버튼 클릭
	$(document).on('click', '.week-delete-btn', function(){
		swal({
			title: "정말로 삭제하시겠습니까?",
			text: "주차를 삭제하면 주차에 해당하는 차시까지 같이 삭제됩니다",
			icon: "warning",
			buttons: ["취소", "삭제"],
			dangerMode: true,
		}).then(btnVal=>{
			if(btnVal){
				swal("Poof! Your imaginary file has been deleted!", {
				  icon: "success",
				});
			}
		});
	});
	$(document).on('click', '.data-update-btn', function(){
		console.log(".data-update-btn");
	});
	$(document).on('click', '.data-delete-btn', function(){
		console.log(".data-delete-btn");
	});
});