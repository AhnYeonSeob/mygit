package kr.or.ddit.yguniv.commons.secondstepauth.controller;

import java.util.Random;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
@RequestMapping("/yguniv/secondstepauth")
public class SecondStepAuthController {
	// 인증코드 저장
	private String authcode = "";
	// 사용자 2차인증방법(sms or email)
	private String userAuthMethod = "";
	
	@GetMapping
	public String selectAuthMethod() {
	// 2차인증 요청 버튼 클릭시 해당회원의 인증방법을 조회해
	// 해당방법에 따라 인증번호를 만들어 전송한다.
	// 해당 회원의 아이디값을 현재 로그인되어있는 정보에서 가져온다.
	
	//회원정보조회를통해 인증방법 조회
		
		if("sms".equalsIgnoreCase(userAuthMethod)) {
			//휴대폰 번호 조회해서 해당 값 가져와서 smsMethod작동
			
		}
		else if("email".equalsIgnoreCase(userAuthMethod)) {
			//email 조회해서 해당 값 가져와서 emailMethod작동
		}
		
		
		
		return "인증번호입력페이지로이동";
	}
	
	@PostMapping
	public String checkAuth() {
	// 사용자가 보낸 인증번호를 받아 전송한 인증번호와 맞는지 검증
	// 실패시 돌려보내고 에러메시지와함께 돌려보내고, 성공시 메인으로 이동
	
		
		
		
		
		return "";
	}
	
	//sms인증인경우
	public void smsMethod() {
		
	}
	
	//email인증인경우
	public void emailMethod() {
		
	}
	
	//인증코드생성메소드
	public String RandomNumber() {
		Random random = new Random();
		int ranNum = random.nextInt(90000)+10000;
		authcode = String.valueOf(ranNum);
		return authcode;
	}
	
}
