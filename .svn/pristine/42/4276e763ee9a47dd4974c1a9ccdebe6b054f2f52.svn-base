<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<link rel="stylesheet" href="${pageContext.request.contextPath }/resources/js/ckeditor5/ckeditor5.css">
<script type="importmap">
{
	"imports": {
		"ckeditor5": "${pageContext.request.contextPath }/resources/js/ckeditor5/ckeditor5.js",
		"ckeditor5/": "${pageContext.request.contextPath }/resources/js/ckeditor5/translations/ko.js/"
	}
}
</script>
<table class="table table-primary align-middle table-bordered">
	<tr>
		<th class="text-center">제목</th>
		<td class="table-light" colspan="3">${lib.libSj }</td>
	</tr>
	<tr>
		<th class="text-center" style="width: 100px;">글번호</th>
		<td class="table-light" style="width: 200px;">${lib.libNo }</td>
		<th class="text-center" style="width: 100px;">작성일</th>
		<td class="table-light" style="width: 200px;">${fn:split(lib.libDt, 'T')[0] } ${fn:split(lib.libDt, 'T')[1] }</td>
	</tr>
	<tr>
		<th class="text-center">작성자</th>
		<td class="table-light">${lib.studentVO.nm }</td>
		<th class="text-center">조회수</th>
		<td class="table-light">${lib.libHit }</td>
	</tr>
	<tr>
		<td class="table-light align-top" colspan="4" style="height: 200px;">${lib.libCn }</td>
	</tr>
</table>
<c:if test="${not empty lib.libAnsDt }">
	<table class="table table-primary align-middle table-bordered mb-2">
		<tr>
			<th class="text-center" style="width: 100px;">답변자</th>
			<td class="table-light" style="width: 200px;">${lib.professorVO.nm } 교수님</td>
			<th class="text-center" style="width: 100px;">답변일</th>
			<td class="table-light" style="width: 200px;">${fn:split(lib.libAnsDt, 'T')[0] } ${fn:split(lib.libAnsDt, 'T')[1] }</td>
		</tr>
		<tr>
			<td class="table-light align-top" colspan="4" style="height: 200px;">${lib.libAnsCn }</td>
		</tr>
	</table>
	<a class="btn btn-primary float-end ms-2" href="${pageContext.request.contextPath }/lecture/${lecture.lectNo }/inquiry">목록</a>
	<button class="btn btn-danger float-end ms-2">삭제</button><!-- 교수(작성자)권한 -->
	<button class="btn btn-info float-end">수정</button><!-- 교수(작성자)권한 -->
</c:if>
<br>
<c:if test="${empty lib.libAnsDt }">
	<div class="ansZone">
		<h3 class="text-center">등록된 답변이 없습니다</h3>
		<a class="btn btn-primary float-end ms-2" href="${pageContext.request.contextPath }/lecture/${lecture.lectNo }/inquiry">목록</a>
		<button class="btn btn-primary float-end ansInsertBtn">등록</button><!-- 교수권한 -->
	</div>
	<div class="ansTemplate" style="display: none;">
		<form name="ansForm">
			<table id="form-table" class="table table-primary align-middle table-bordered" data-path="${pageContext.request.contextPath }">
				<tr>
					<th class="text-center" style="width: 100px;">답변</th>
					<td class="table-light">
						<textarea name="libCn" class="form-control" id="editor"></textarea>
					</td>
				</tr>
			</table>
			<button class="btn btn-secondary float-end ms-2 ansCancelBtn">취소</button>
			<button class="btn btn-primary float-end mb-3 ansSaveBtn">저장</button>
		</form>
	</div>
</c:if>
<script src="${pageContext.request.contextPath }/resources/js/lecture/lectureInquiryBoardDetail.js" type="module"></script>
