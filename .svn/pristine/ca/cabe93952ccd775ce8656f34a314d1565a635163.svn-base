document.addEventListener("DOMContentLoaded", function(){
	
	const findButton = document.getElementById("findButton");
	const result = document.getElementById("result");
	const cp = document.getElementById("cp");
	
	
	console.log("findButton 눌렀니 ? ", findButton);
	console.log("result에 출력에는 이제 학번이 나와야하는거 알지 ?", result);
	
	findButton.addEventListener("click",function(){
		const nm = document.getElementById("nm").value.trim(); // 이름 입력
		const brdt = document.getElementById("brdt").value.trim(); // 이름 입력

		
		
		console.log("birth도 입력했니 ?  했으면 나타나라:", brdt);
		console.log("name을 입력했니 ? 했으면 나타나라:" , nm);
		
		if(!nm ){
				result.value ="이름을 입력하세요"; 	
				return;		
		}
		if(!brdt){
			result.value = "생년월일을 입력하세요"; 
			return;
		}
		
		fetch (`${cp}/findLogin?nm=${encodeURIComponent(nm)}&brdt=${encodeURIComponent(brdt)}`,{
			
			method : "GET",
			headers : {
				"Content-type": "application/json",
				},	
			})
			
			.then((response) => {
                const contentType = response.headers.get("Content-Type");
                if (contentType && contentType.includes("application/json")) {
	
                    return response.json(); // JSON 파싱
                } else {
                    throw new Error("JSON 형식의 응답이 아닙니다. ");
                }
            })
			.then((data)=>{
				console.log("Response:" , data);
				
				if(data && data.id){
					result.value= `학번은 ${data.id}`;
				}else {
					result.value ="학번을 찾을 수 없습니다. ";
				}
				
			})
			.catch((error)=>{
				
				console.error ("Error:", error);
				result.value = "서버 요청 중 오류 발생";
			
		
				});
	
		});
	});