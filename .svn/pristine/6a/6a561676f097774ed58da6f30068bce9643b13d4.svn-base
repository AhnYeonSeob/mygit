	<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>

<nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item">장학금 관리</li>
    <li class="breadcrumb-item active" aria-current="page">장학금 추천/ 신청서 목록</li>
  </ol>
</nav>




		<div class="search-area" style="display: flex; justify-content: flex-end; gap: 10px; align-items: center; margin-bottom: 20px;" data-pg-target="#searchForm" data-pg-fn-name="fnPaging">
		    <form:select path="condition.searchType" class="form-select" style="width: 100px;">
		        <form:option value="" label="전체" />
		        <form:option value="title" label="상태코드" />
		        <form:option value="writer" label="학번" />
		    </form:select>
		    <form:input path="condition.searchWord" class="form-control" style="width: 200px;" />
		    <button id="search-btn" class="btn btn-primary">검색</button>
		</div>

<table class="table table-bordered">
    <thead class="table-primary text-center">

	<tr align="center">
	 	<th>순번</th>
	 	<th>유형</th>

        <th>학기번호</th>
			<th>학번</th>
			<th>이름</th>
			<th>접수일자</th>
			<th>선발일자</th>
			<th>상태코드</th>
	
	</tr>
</thead>
<tbody align="center">
<c:if test="${not empty ask}">

			<c:forEach items="${ask}" var="ask">


				<tr onclick="location.href='<c:url value='/askAward/${ask.shapDocNo}'/>'" style="cursor: pointer;">

					<td>${ask.rnum}</td>
					<td>${ask.awardVO.awardType}</td>
					
					<td>
					 ${fn:substring(ask.semstrNo, 0, 4)}-${fn:substring(ask.semstrNo, 4, 6)} </td>
					
	 				<td>${ask.stuId}</td>
					<td>${ask.studentVO.nm}</td>
					
					
				<td>	${fn:split(ask.shapRcptDate, 'T')[0] } ${fn:split(ask.shapRcptDate, 'T')[1] }
					</td>
				<td>	${fn:split(ask.shapChcDate, 'T')[0] } ${fn:split(ask.shapChcDate, 'T')[1] }
					</td>
				
					
				
					
					<td>
					    <c:if test="${ask.commonCodeVO.cocoStts == '승인'}">
					        <button class="btn btn-success" style="color: white;">승인</button>
					    </c:if>
					    <c:if test="${ask.commonCodeVO.cocoStts == '반려'}">
					        <button class="btn btn-danger" style="color: white;">반려</button>
					    </c:if>
					    <c:if test="${ask.commonCodeVO.cocoStts == '접수'}">
					        <button class="btn btn-primary" style="color: white;">접수</button>
					    </c:if>
					    <c:if test="${ask.commonCodeVO.cocoStts != '승인' && ask.commonCodeVO.cocoStts != '반려'&& ask.commonCodeVO.cocoStts != '접수'}">
					       <button class="btn btn-warning" style="color: black;"> ${ask.commonCodeVO.cocoStts}</button>
					    </c:if>
					</td>
				</tr>
			</c:forEach>
		</c:if>
		
		<c:if test="${empty ask }">
		<td colspan="11"> 신청 목록 없음</td>
		
		
		</c:if>

</tbody>
<tfoot>

<tr style="text-align: center;">
			<td colspan="9">
				<div class="paging-area">${pagingHTML }</div>

			</td>

		</tr>
		
</tfoot>



</table>


<form:form id="searchForm" method="get" modelAttribute="condition">
	<form:input path="searchType"  style="display: none;" />
	<form:input path="searchWord" style="display: none;"/>
	<input type="hidden" name="page" />
</form:form>
<script src="${pageContext.request.contextPath }/resources/js/utils/paging.js"></script>



