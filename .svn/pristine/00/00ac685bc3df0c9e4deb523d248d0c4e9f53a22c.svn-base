<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>


<script>
    // 서버의 컨텍스트 경로를 JavaScript 변수에 설정
    const contextPath = "${pageContext.request.contextPath}/";
</script>

<table class="table table-bordered" >
       
   
        <thead align="center">
        <tr style="text-align: right;">
        	<td colspan="4"> 
        	
        	<button style="text-align: right;" class="btn btn-primary"> 팝업등록 </button>
        	
        	
        	</td>
        </tr>
       
        <tr >
         <td colspan="1"> 게시물 제목</td>
       
            <td colspan="3">${systemBoard.snbTtl}</td>
         
        </tr>
    </thead>
    
    <tbody align="center">
    
      <tr > 
       <td colspan="1"> 작성자</td>
            <td>${systemBoard.adminId} </td>
            
            
             <td colspan="1"> 조회수</td>
            <td>${systemBoard.snbCount}</td>
        </tr>
       
       
    <tr>
    
    	<td colspan="4">${fn:split(systemBoard.snbDt, 'T')[0] } ${fn:split(systemBoard.snbDt, 'T')[1] }</td>
      </tr> 
            <tr>
		<td colspan="4">
		
		<c:forEach items="${systemBoard.atchFile.fileDetails }" var="fd" varStatus="vs">
				
				
				<c:url value='/systemBoard/${systemBoard.snbNo}/atch/${fd.atchFileId}/${fd.fileSn}' var="downUrl"/>
				
				<a href="${downUrl }">${fd.orignlFileNm }(${fd.fileFancysize })</a>
				${not vs.last ? '|' : ''}
			</c:forEach>
			
			<c:if test="${empty systemBoard.atchFile.fileDetails}">
		    첨부파일없음
		</c:if>
			
		</td>
	</tr>
      
      
	
       
            
            <tr>
            <td colspan="4">
            
      ${systemBoard.snbCn}

             <!-- 첨부된 이미지 파일을 내용에 추가 -->
        <c:forEach items="${systemBoard.atchFile.fileDetails}" var="fd">
            <!-- 이미지 파일 확장자 검사 -->
            <c:if test="${fn:toLowerCase(fd.fileExtsn) == 'jpg' || 
                         fn:toLowerCase(fd.fileExtsn) == 'jpeg' || 
                         fn:toLowerCase(fd.fileExtsn) == 'png' || 
                         fn:toLowerCase(fd.fileExtsn) == 'gif'}">
                <div style="margin-top: 10px;">
                    <img src="<c:url value='/systemBoard/${systemBoard.snbNo}/atch/${fd.atchFileId}/${fd.fileSn}' />" 
                         alt="${fd.orignlFileNm}" 
                         style="max-width: 100%; height: auto;" />
                </div>
            </c:if>
        </c:forEach>

            
            </td>
            
            
            
            
            
        </tr>
	


</tbody>

    
             
</table>
<div align="right">
<a href="<c:url value='/systemBoard/${snbNo}/edit' />" class="btn btn-info"  >수정</a>

<form action="<c:url value='/systemBoard/delete/${snbNo}' />" method="post" style="display:inline;">
   
    <button type="submit" class="btn btn-danger">삭제</button>
</form>

<a href="<c:url value='/systemBoard' />" class="btn btn-primary">목록</a>

</div>


<script src="${pageContext.request.contextPath }/resources/js/board/delete.js"></script>