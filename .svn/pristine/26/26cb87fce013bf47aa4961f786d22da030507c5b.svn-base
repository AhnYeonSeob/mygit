<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<%@ taglib uri="http://www.springframework.org/security/tags" prefix="security"%> 
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<input id="lectNo" type="hidden" value="${lectNo }"> 
<h4>제출과제리스트</h4>
<h4>${pageContext.request.userPrincipal.name }</h4>
<table id="parentTable" class="table table-bordered" 
	data-path="${pageContext.request.contextPath }" 
	data-auth="${pageContext.request.userPrincipal.name }"
	data-lectNo="${lectNo }"
	>
	<thead>
		<tr>
			<!-- rownum -->
			<th>번호</th>
			<!-- 강의명 assignment에서 가져옴-->
			<th>강의명</th>
			<!-- 과제명 assignment에서 가져옴-->
			<th>과제명</th>
			<!-- 과제배점 assignment / 점수-->
			<th>점수</th>
			<!-- 제출여부 Y제출완료/N미제출-->
			<th>제출여부</th>
			<th>첨부파일</th>
			<th>피어리뷰</th>
		</tr>
	</thead>
</table>

<!-- 과제 상세보기 모달 창 -->
<div class="modal fade" id="assignDetailModal" tabindex="-1" aria-labelledby="assignDetailModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="assignDetailModalLabel">과제 상세 정보</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
             <div class="modal-body">
                <table class="table table-bordered">
                    <tbody>
                        <tr>
                            <th>강의명</th>
                            <td class="assignment-lectNm"></td>
                        </tr>
                        <tr>
                            <th>과제명</th>
                            <td class="assignment-assigNm"></td>
                        </tr>
                        <tr>
                            <th>내용</th>
                            <td class="assignment-assigNotes"></td>
                        </tr>
                        <tr>
                            <th>배점</th>
                            <td class="assignment-assigScore"></td>
                        </tr>
                        <tr>
                            <th>제출마감일</th>
                            <td class="assignment-assigEd"></td>
                        </tr>
                        <tr>
                            <th>첨부파일</th>
                            <td class="assignment-atchFileId"></td>
                        </tr>
                        <tr>
                            <th>피어리뷰여부</th>
                            <td class="assignment-peerYn"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- 과제제출 모달 창 -->
<div class="modal fade" id="assignSubmitModal" tabindex="-1" aria-labelledby="assignSubmitModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="assignSubmitModalLabel">과제 제출 창</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
             <div class="modal-body">
                <!-- Spring 폼 태그 사용 -->
                <form:form method="POST" action="/submitAssignment" modelAttribute="assignmentSubmission" id="assignmentForm">
                    <table class="table table-bordered">
                        <tbody>
                            <tr>
                                <th>강의명</th>
                                <td><form:input path="lectNm" class="form-control" /></td>
                            </tr>
                            <tr>
                                <th>과제명</th>
                                <td><form:input path="assigNm" class="form-control" /></td>
                            </tr>
                            <tr>
                                <th>학번</th>
                                <td><form:input path="stuId" class="form-control" readonly=""/></td>
                            </tr>
                            <tr>
                                <th>내용</th>
                                <td><form:textarea id="editor" path="assubNotes" class="form-control" /></td>
                            </tr>
                            <tr>
                                <th>첨부파일</th>
                                <td><input name="uploadFiles" type="file" multiple class="form-control"/></td>
                            </tr>
                        </tbody>
                    </table>
                    <button type="submit" class="btn btn-primary">제출</button>
                </form:form>
            </div>
        </div>
    </div>
</div>




<script src="${pageContext.request.contextPath }/resources/js/assignmentSubmission/assignmentSubmission.js"></script>