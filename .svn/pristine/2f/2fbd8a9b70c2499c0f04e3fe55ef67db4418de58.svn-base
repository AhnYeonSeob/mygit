/**
 * 
 */
let updateScores;
let submitTest;
document.addEventListener("DOMContentLoaded", () => {
const cp = document.getElementById("cp").value;
const userId = document.getElementById("testResults").value;
// 유형별 점수 저장 객체
const scores = {
	사회형: 0,
	예술형: 0,
	탐구형: 0,
	관리형: 0,
	현장형: 0,
	진취형: 0,
	관습형: 0
};

// 점수 업데이트
updateScores = function(type, value) {
	scores[type] += parseInt(value);
	//타입이랑 점수 출력
	console.log(type, scores[type]);
}

// 데이터 준비 함수
submitTest = function() {
	// 데이터 객체 생성
	const data = {
		stuId: userId,  // 사용자 ID
		scores: scores  // 점수 객체
	};

	// 데이터 확인 (콘솔 출력)
	console.log(data);

	// 서버로 데이터 전송 (AJAX 예제)
fetch(cp+'/jobtest/submit', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
	})
	.then(response => {
		console.log(response.status);
		return response.json();
    })
    .then(data => {
		console.log(data);
		console.log(data.status);
        if (data.status === "success") {
            swal({
                title: "등록 완료",
                text: "응시가 성공적으로 등록되었습니다.",
                icon: "success",
                button: "확인"
            }).then(() => {
                window.location.href = cp+'/jobtest/result';
            });
        }
    })
}
});