<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
<%@ taglib uri="http://www.springframework.org/security/tags" prefix="security" %>

<style>

    .button-group {
        display: flex;
        justify-content: flex-start; /* 버튼들을 왼쪽 정렬 */
        gap: 10px; /* 버튼 간 간격 */
        margin-bottom: 20px; /* 버튼 아래 여백 */
    }

    #applyBtn {
        padding: 8px 16px; /* 버튼 크기 조정 */
        font-size: 14px;
        background-color: #007bff; /* 파란색 배경 */
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    #applyBtn:hover {
        background-color: #0056b3; /* 호버 시 어두운 파란색 */
    }

    .star-container {
        display: inline-block;
        position: relative;
        width: 30px;
        height: 30px;
        cursor: pointer;
    }

    .star-container input {
        position: absolute;
        opacity: 0;
        cursor: pointer;
    }

    .star-container .star {
        position: absolute;
        width: 30px;
        height: 30px;
        background-color: #ccc; /* 기본 회색 */
        clip-path: polygon(
            50% 0%,
            61% 35%,
            98% 35%,
            68% 57%,
            79% 91%,
            50% 70%,
            21% 91%,
            32% 57%,
            2% 35%,
            39% 35%
        );
        transition: background-color 0.3s ease, transform 0.2s ease;
    }

    .star-container input:checked ~ .star {
        background-color: #ffc107; /* 노란색 */
        transform: scale(1.2); /* 크기 확대 */
    }
    .btn-area{
    	text-align:right;
    }
</style>


<h2>자기소개서 상세보기</h2>

<table class="table table-bordered" id="form-table" data-path="${pageContext.request.contextPath }" >
	<tr>
        <th>학번</th>
        <td>${introduce.stuId}</td>
		<th>학년</th>
        <td>${introduce.commoncode.cocoStts}</td>
        
    </tr>
    <tr>
    	<th>이름</th>
       	<td>${introduce.student.nm }</td>
        <th>취업희망분야</th>
        <td>${introduce.employmentfield.empfiNm}</td>
    </tr>
    <tr>
  <c:forEach var="cert" items="${introduce.certificate}">
		<th>자격증이름</th>
   		<td>${cert.certNm}</td>
  </c:forEach>
        <th>작성일자</th>
        <td>${introduce.intDate}</td>
        <th>첨삭일자</th>
        <td>${introduce.intUdate}</td>
    </tr>
    
    <!-- 첨부파일 -->
<tr>
    <th>첨부파일</th>
    <td colspan="4">
        <c:forEach items="${introduce.certificate}" var="cert">
            <c:if test="${not empty cert.atchFile.fileDetails}">
                <c:forEach items="${cert.atchFile.fileDetails}" var="fd" varStatus="vs">
                    <c:url value='/atch/${fd.atchFileId}/${fd.fileSn}' var="downUrl"/>
                    <a href="${downUrl}">${fd.orignlFileNm}(${fd.fileFancysize})</a>
                    ${not vs.last ? '|' : ''}
                </c:forEach>
            </c:if>
            <c:if test="${empty cert.atchFile.fileDetails}">
                첨부파일 없음
            </c:if>
        </c:forEach>
    </td>
</tr>
    <tr>
        <th>항목</th>
        <th>기존 데이터</th>
    </tr>


</table>
<table class="table table-bordered">
    <tr>
        <th>구분</th>
        <th>지원동기</th>
        <th>입사 후 포부</th>
        <th>성격 및 장단점</th>
    </tr>
    <tr>
        <td>기존 데이터</td>
        <td id="originalIntQue1">${introduce.intQue1}</td>
        <td id="originalIntQue2">${introduce.intQue2}</td>
        <td id="originalIntQue3">${introduce.intQue3}</td>
    </tr>
    <c:if test="${not empty editedIntroduce}">
        <tr>
            <td>수정된 데이터</td>
            <td style="color: ${introduce.intQue1 != editedIntroduce.intQue1 ? 'red' : 'black'};">
                ${editedIntroduce.intQue1}
            </td>
            <td style="color: ${introduce.intQue2 != editedIntroduce.intQue2 ? 'red' : 'black'};">
                ${editedIntroduce.intQue2}
            </td>
            <td style="color: ${introduce.intQue3 != editedIntroduce.intQue3 ? 'red' : 'black'};">
                ${editedIntroduce.intQue3}
            </td>
        </tr>
    </c:if>
</table>

<!-- 첨삭 버튼 -->
<div class="btn-area">
    <a href="<c:url value='/introduce/edit/${introduce.stuId}' />" class="btn btn-info">첨삭</a>
    <a href="<c:url value='/introduce' />" class="btn btn-primary">목록</a>
</div>






<!-- <form id="applyForm"> -->
<!-- <!-- 신청하기에 들어가는 jobNo, stuId가져오는 폼 --> 
<%-- <security:authentication property="principal" var="person"/> --%>
<!-- 	<table> -->
<!-- 	<tr> -->
<!-- 	 	<th>jobNo</th> -->
<%--         <td id="apply-jobno">${jobboard.jobNo}</td> --%>
<!--         <th>로그인한사용자id</th> -->
<%--         <td id="apply-id">${person.realUser.id}</td> --%>
<!--      </tr> -->
<!-- 	</table> -->
<!-- </form> -->


<script src="${pageContext.request.contextPath }/resources/js/jobboard/jobBoardDelete.js"></script>
