<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>


<!-- 부트스트랩 5 -->
<!-- SweetAlert2 CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.3/dist/sweetalert2.min.css"
	rel="stylesheet">
<!-- Bootstrap 5 CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
	rel="stylesheet">

<style>
.accordion-item {
	transition: max-height 0.5s ease-in-out;
	overflow: hidden;
}

.accordion-button.collapsed {
	background-color: #f1f1f1;
	transition: background-color 0.3s ease;
}

.accordion-button:not(.collapsed) {
	background-color: #dcdcdc;
}

.accordion-collapse.collapse {
	max-height: 0;
	transition: max-height 0.5s ease-out;
}

/* 적당한 최대 높이 설정 */
.accordion-collapse.show {
	max-height: 500px;
}
	
/* 배경색 효과 */
.accordion-button {
	background-color: #f8f9fa;
	border: 1px solid #ddd;
}

.accordion-button:hover {
	background-color: #e9ecef;
}
</style>

<!-- 출결 리스트 -->
<div class="container">
    <div class="left" style="width: 38%; float: left; box-sizing: border-box;">
        <!-- 아코디언 부분 -->
        <div class="accordion" id="accordionExample">
            <c:forEach items="${selectOrderLectureDataList}" var="week">
                <!-- 주차별 아코디언 -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="heading-${week.weekCd}">
                        <!-- 주차 제목 -->
                        <div class="accordion-button" 
                             data-bs-toggle="collapse" 
                             data-bs-target="#collapse-${week.weekCd}" 
                             aria-expanded="false" 
                             aria-controls="collapse-${week.weekCd}">
                            ${week.commonCodeVO.cocoStts} 강의
                        </div>
                    </h2>
                    <div id="collapse-${week.weekCd}" class="accordion-collapse collapse" 
                         aria-labelledby="heading-${week.weekCd}" data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <c:forEach items="${week.orderLectureDataList}" var="order">
                                <strong>강의차수:</strong> ${order.lectOrder}회차 <br>
                                <strong>일자:</strong> ${order.sectDt} <br>
                                <strong>주차명:</strong> ${order.sectNm} <br>
                                <!-- 조회 버튼 추가 -->
                                <!-- 강의차수별 조회 버튼 -->
								<button class="fetch-attendance-btn" 
								        data-lect-order="${order.lectOrder}" 
								        data-week-cd="${week.weekCd}">
								    조회
								</button>
                                <hr>
                            </c:forEach>
                        </div>
                    </div>
                </div>
            </c:forEach>
        </div>
    </div>

    <div class="right" style="width: 58%; float: right; box-sizing: border-box;">
        <!-- 출결 테이블 -->
        <table class="table table-primary align-middle table-bordered">
            <thead>
                <tr>
                    <th>학번</th>
                    <th>이름</th>
                    <th>강의실</th>
                    <th>출결상태</th>
                </tr>
            </thead>
            <tbody id="attendanceTableBody">
                <!-- 출결 데이터가 비동기적으로 여기에 표시됩니다. -->
            </tbody>
        </table>
    </div>
</div>







<!-- <script src="attendance.js"></script> -->
